!function e(a,t,s){function i(n,o){if(!t[n]){if(!a[n]){var l="function"==typeof require&&require;if(!o&&l)return l(n,!0);if(r)return r(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var c=t[n]={exports:{}};a[n][0].call(c.exports,function(e){var t=a[n][1][e];return i(t?t:e)},c,c.exports,e,a,t,s)}return t[n].exports}for(var r="function"==typeof require&&require,n=0;n<s.length;n++)i(s[n]);return i}({1:[function(e,a,t){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function r(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function n(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var o=e("states/GameState"),l=s(o),h=function(e){function a(){i(this,a);var e=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,1024,720,Phaser.AUTO,"window",null));return e.state.add("GameState",l["default"],!1),e.state.start("GameState"),e}return n(a,e),a}(Phaser.Game);new h},{"states/GameState":2}],2:[function(e,a,t){"use strict";function s(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function i(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function r(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,a){for(var t=0;t<a.length;t++){var s=a[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(a,t,s){return t&&e(a.prototype,t),s&&e(a,s),a}}(),o=function(e){function a(){return s(this,a),i(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return r(a,e),n(a,[{key:"preload",value:function(){this.game.load.image("tiles","assets/tilemap16.png"),this.game.load.image("tile","assets/tile.png"),this.game.load.image("PlantGrass","assets/GrassA.png"),this.game.load.image("PlantTallGrass","assets/GrassA.png"),this.game.load.image("PlantShrubLow","assets/ShrubLowA.png"),this.game.load.image("PlantBush","assets/Bush.png"),this.game.load.image("PlantTreeCecropia","assets/TreeCecropiaA.png"),this.game.load.image("PlantTreeTeak","assets/TreeTeakA.png"),this.game.load.image("PlantTreeBirch","assets/TreeBirchA.png"),this.game.load.image("PlantTreePoplar","assets/TreePoplarA.png"),this.game.load.image("PlantTreeOak","assets/TreeOakA.png"),this.game.load.image("PlantTreePalm","assets/TreePalmA.png"),this.game.load.image("PlantTreeBamboo","assets/TreeBambooA.png"),this.game.load.image("PlantRice","assets/RicePlantA.png"),this.game.load.image("PlantPotato","assets/PotatoPlant.png"),this.game.load.image("PlantStrawberry","assets/StrawberryPlant_2.png"),this.game.load.image("PlantCorn","assets/CornPlantA_2.png"),this.game.load.image("PlantDaylily","assets/Daylily.png"),this.game.load.image("PlantHaygrass","assets/HaygrassA.png"),this.game.load.image("PlantHealroot","assets/Healroot.png"),this.game.load.image("PlantHops","assets/HopsPlantA.png"),this.game.load.image("PlantWildHealroot","assets/Healroot.png"),this.game.load.image("PlantDandelion","assets/Dandelion.png"),this.game.load.image("PlantRaspberry","assets/RaspberryBushA_2.png"),this.game.load.image("PlantBrambles","assets/BramblesA.png"),this.game.load.image("PlantAlocasia","assets/AlocasiaA.png"),this.game.load.image("PlantClivia","assets/CliviaA.png"),this.game.load.image("RawBerries","assets/Berries.png"),this.game.load.image("RawPotatoes","assets/Potatoes.png"),this.game.load.image("Pemmican","assets/Pemmican.png"),this.game.load.image("Granite","assets/RockLowA.png"),this.game.load.image("Sandstone","assets/RockLowA.png"),this.game.load.image("Marble","assets/RockLowA.png"),this.game.load.image("Limestone","assets/RockLowA.png"),this.game.load.image("Slate","assets/RockLowA.png"),this.game.load.image("RockRubble","assets/RubbleA.png"),this.game.load.image("BuildingRubble","assets/RubbleA.png"),this.game.load.image("Wall","assets/Wall.png"),this.game.load.image("Door","assets/Door.png"),this.game.load.image("Cooler","assets/Cooler.png"),this.game.load.image("Vent","assets/Vent.png"),this.game.load.image("SolarGenerator","assets/SolarCollector.png"),this.game.load.image("WindTurbine","assets/WindTurbineBody.png"),this.game.load.script("pako","assets/pako.min.js"),this.game.time.advancedTiming=!0,this.game.antialias=!1,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0}},{key:"create",value:function(){this.center={x:this.game.world.centerX,y:this.game.world.centerY},this.worldSize={x:0,y:0,z:0},this.cursors=null,this.TILESIZE=64,this.mapInfo={height:0,width:0,topTerrainGrid:[],underTerrainGrid:[],roofGrid:[]},this.topTerrainGridLayer=this.underTerrainGridLayer=this.roofGridLayer=null,this.mainLayer=null,this.currentBounds=null,this.zoompoint={x:0,y:0},this.marker=null,this.zoomLevel=.2}},{key:"update",value:function(){null!==this.cursors&&(this.cursors.up.isDown?this.game.camera.y-=this.TILESIZE:this.cursors.down.isDown&&(this.game.camera.y+=this.TILESIZE),this.cursors.left.isDown?this.game.camera.x-=this.TILESIZE:this.cursors.right.isDown&&(this.game.camera.x+=this.TILESIZE),this.plusKey.isDown&&this.zoomLevel<=2&&(this.zoomLevel+=.1,this.mainLayer.scale.set(this.zoomLevel,this.zoomLevel)),this.minusKey.isDown&&this.zoomLevel>=.2&&(this.zoomLevel-=.1,this.mainLayer.scale.set(this.zoomLevel,this.zoomLevel)))}},{key:"render",value:function(){this.game.debug.text(this.game.time.fps||"--",2,14,"#00ff00")}},{key:"loadWorld",value:function(e){console.log("File In Phaser");var a=e.savegame.game.maps.li.mapInfo.size,t=this.getPosition(a);this.worldSize.x=t[0],this.worldSize.y=t[2],this.worldSize.z=t[1],this.mapInfo.width=this.TILESIZE*this.worldSize.x,this.mapInfo.height=this.TILESIZE*this.worldSize.y,this.mapInfo.topTerrainGrid=this.decompress(e.savegame.game.maps.li.terrainGrid.topGridDeflate),this.mapInfo.underTerrainGrid=this.decompress(e.savegame.game.maps.li.terrainGrid.underGridDeflate),this.mapInfo.resourceTerrainGrid=this.decompress(e.savegame.game.maps.li.compressedThingMapDeflate),console.log(this.mapInfo.resourceTerrainGrid),this.allThings=e.savegame.game.maps.li.things.thing,this.mainLayer=this.game.add.group(),this.renderTileMap(),this.renderStuff(),this.mainLayer.pivot.x=this.TILESIZE*this.worldSize.x/2,this.mainLayer.pivot.y=this.TILESIZE*this.worldSize.y/2,this.mainLayer.position.x=this.game.world.centerX,this.mainLayer.position.y=this.game.world.centerY,this.mainLayer.angle=-90,this.mainLayer.scale.set(this.zoomLevel,this.zoomLevel),this.game.world.setBounds(-this.mapInfo.width/2,-this.mapInfo.height/2,2*this.mapInfo.width,2*this.mapInfo.height),this.cursors=this.game.input.keyboard.createCursorKeys(),this.plusKey=this.game.input.keyboard.addKey(Phaser.Keyboard.EQUALS),this.minusKey=this.game.input.keyboard.addKey(Phaser.Keyboard.UNDERSCORE)}},{key:"decompress",value:function(e){var a=atob(e),t=[];try{t=pako.inflate(a,{raw:!0})}catch(s){console.log(s)}return this.delaceArray(t)}},{key:"renderTileMap",value:function(){this.game.stage.backgroundColor="#2d2d2d",this.topTerrainGridLayer=this.game.add.group(),this.roofGridLayer=this.game.add.group(),this.resourceGridLayer=this.game.add.group();for(var e=0,a=null,t=0;t<this.worldSize.x;t++)for(var s=0,i=0;i<this.worldSize.y;i++){switch(s=this.worldSize.x-t,a=this.game.add.sprite(t*this.TILESIZE,i*this.TILESIZE,"tile"),this.mapInfo.topTerrainGrid[e]){case 2:a.tint=13421772;break;case 235:a.tint=11974326;break;case 70:a.tint=15175497;break;case 246:a.tint=10066329;break;case 37:a.tint=16777215;break;case 199:a.tint=15007488;break;case 101:a.tint=16777215;break;case 174:a.tint=16711680;break;case 232:a.tint=16776960;break;case 202:a.tint=255;break;case 46:a.tint=16777164;break;case 231:a.tint=5592405;break;case 41:a.tint=5586432;break;case 171:a.tint=2236962;break;case 88:a.tint=7302244;break;case 224:a.tint=6710886;break;case 160:a.tint=10988937;break;case 219:a.tint=4473924;break;case 126:a.tint=6710886;break;case 173:a.tint=7302244;break;case 169:a.tint=6710886;break;case 245:a.tint=7890944;break;case 1:a.tint=16119285;break;case 166:a.tint=16571525;break;case 161:a.tint=8012551;break;case 239:a.tint=6900782;break;case 115:a.tint=5386510;break;case 48:a.tint=4005632;break;case 6:a.tint=3095808;break;case 73:a.tint=9130240;break;case 158:a.tint=3753735;break;case 255:a.tint=16777215;break;case 205:a.tint=3355443;break;case 78:a.tint=6897152;break;case 37:a.tint=0;break;case 140:a.tint=6853315;break;case 58:a.tint=6853315;break;case 181:a.tint=9423065;break;case 137:a.tint=9423065;break;case 212:a.tint=9423065;break;case 56:a.tint=7302244;break;case 246:a.tint=7302244;break;case 154:a.tint=7302244;break;case 222:a.tint=7960953;break;case 116:a.tint=7895160;break;case 199:a.tint=7829367;break;case 99:a.tint=9738618;break;case 82:a.tint=8949104;break;case 238:a.tint=10988937;break;case 148:a.tint=4473924;break;case 101:a.tint=4473924;break;case 184:a.tint=4473924;break;case 57:a.tint=16119285;break;case 135:a.tint=16119285;break;case 208:a.tint=16119285;break;default:a.alpha=0}a.data={tileName:this.mapInfo.topTerrainGrid[e]},e++,a.inputEnabled=!0,a.events.onInputDown.add(this.tileCallback,this.mapInfo.topTerrainGrid[e]),this.topTerrainGridLayer.add(a)}this.mainLayer.add(this.topTerrainGridLayer);var t,i;e=0;for(var t=0;t<this.worldSize.x;t++)for(var r=0,i=0;i<this.worldSize.y;i++){switch(r=this.worldSize.x-t,this.mapInfo.resourceTerrainGrid[e]){case 0:break;default:a=this.game.add.sprite(t*this.TILESIZE,i*this.TILESIZE,"tile"),a.tint=0,a.alpha=.3,a.data={tileName:this.mapInfo.resourceTerrainGrid[e]},a.inputEnabled=!1,a.events.onInputDown.add(this.tileCallback,this.mapInfo.resourceTerrainGrid[e])}e++,this.resourceGridLayer.add(a)}this.mainLayer.add(this.resourceGridLayer)}},{key:"renderStuff",value:function(){var e=null;this.stuffGridLayer=this.game.add.group();for(var a=0;a<this.allThings.length;a++){var t=this.getPosition(this.allThings[a].pos);switch(e=this.game.add.sprite(t[2]*this.TILESIZE,t[0]*this.TILESIZE,this.allThings[a].def),this.allThings[a].stuff){case"BlocksSandstone":e.tint=9275771;break;case"BlocksGranite":e.tint=4868682;break;case"BlocksSlate":e.tint=3355443;break;case"BlocksLimestone":e.tint=10988937;break;case"BlocksMarble":e.tint=16250871;break;case"WoodLog":e.tint=12545066;break;default:e.tint=16777215}e.inputEnabled=!0,e.data={def:this.allThings[a].def,stuff:this.allThings[a].stuff},e.events.onInputDown.add(this.thingCallback,e),e.anchor.setTo(0,1),e.width>64&&e.anchor.setTo(.25,.75),e.angle=90,this.stuffGridLayer.add(e)}this.mainLayer.add(this.stuffGridLayer)}},{key:"delaceArray",value:function(e){for(var a=0,t=[],s=this.worldSize.x;s>0;s--)for(var i=2*this.worldSize.y;i>0;i--)i%2===0&&t.push(e[a]),a++;return t}},{key:"tileCallback",value:function(e){console.log(e.data)}},{key:"thingCallback",value:function(e){console.log(e.data)}},{key:"getPosition",value:function(e){var a=e.replace(/[(-)]/g,"");return a=a.split(",")}}]),a}(Phaser.State);t["default"]=o},{}]},{},[1]);